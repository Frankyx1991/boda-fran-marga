<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Boda Fran & Marga</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet" />

<style>
  html, body { height:100%; margin:0; }
  body{
    min-height:100dvh;
    display:grid;
    grid-template-rows:auto 1fr auto;
    color:#fff; text-align:center;
    font-family:'Playfair Display', serif;
    position:relative; overflow-x:hidden; background:#000;
  }
  /* Fondo: usa tu imagen hosteada en GitHub (o cambia por la que quieras) */
  body::before{
    content:"";
    position:fixed; inset:0;
    background:url("https://frankyx1991.github.io/boda-fran-marga/assets/fondo.jpg?v=1")
               center center / cover no-repeat;
    filter:brightness(0.65); z-index:-1;
  }
  header{ width:100%; padding:max(12px, env(safe-area-inset-top)) 12px 6px;
    background:linear-gradient(to bottom, rgba(0,0,0,.35), rgba(0,0,0,0)); }
  h1{
    font-family:'Great Vibes', cursive;
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    font-size:clamp(40px, 8vw, 76px); line-height:1.05; font-weight:400; margin:0;
    text-shadow:0 0 15px rgba(0,0,0,.6);
  }
  .fecha{ font-size:clamp(17px, 2.8vw, 24px); margin-top:4px; text-shadow:0 0 12px rgba(0,0,0,.7); opacity:.95; }
  footer{
    width:100%; padding:24px 12px max(28px, env(safe-area-inset-bottom));
    background:linear-gradient(to top, rgba(0,0,0,.45), rgba(0,0,0,0));
    display:flex; justify-content:center; gap:14px; flex-wrap:wrap;
  }
  .btn{
    padding:14px 24px; font-size:clamp(16px, 2.6vw, 20px);
    background:rgba(255,255,255,0.18); color:#fff;
    border:1px solid rgba(255,255,255,0.45); border-radius:999px;
    cursor:pointer; transition:all .25s ease; backdrop-filter: blur(6px);
    text-shadow:0 0 8px rgba(0,0,0,0.6); box-shadow:0 6px 20px rgba(0,0,0,0.25);
    display:flex; align-items:center; gap:8px; font-family:'Playfair Display', serif;
  }
  .btn:hover{ background:rgba(255,255,255,0.3); transform:translateY(-3px) scale(1.04);
    box-shadow:0 10px 24px rgba(0,0,0,0.4); }
  .icono{ font-size:22px; line-height:0; }
</style>
</head>

<body>
  <header>
    <h1>Fran &amp; Marga</h1>
    <p class="fecha">11/10/2025</p>
  </header>

  <main></main>

  <footer>
    <button id="btnFoto" class="btn"><span class="icono">üì∏</span>Foto</button>
    <button id="btnVideo" class="btn"><span class="icono">üé•</span>V√≠deo</button>
    <button id="btnGaleria" class="btn"><span class="icono">üñºÔ∏è</span>Galer√≠a</button>
  </footer>

  <!-- Inputs ocultos -->
  <input id="pickFoto" type="file" accept="image/*" capture="environment" style="display:none" />
  <input id="pickVideo" type="file" accept="video/*" capture="environment" style="display:none" />
  <input id="pickGaleria" type="file" accept="image/*,video/*" style="display:none" />

  <script>
    // ENDPOINT de esta Web App (inyectado en el servidor; no necesitas copiarlo a mano)
    const ENDPOINT = "<?= ScriptApp.getService().getUrl() ?>";
    const ALBUM    = "Boda Fran & Marga";

    async function uploadMultipart(file){
      const fd = new FormData();
      fd.append("album", ALBUM);
      fd.append("file", file, file.name);

      // fetch al MISMO dominio de Apps Script ‚Üí sin CORS, sin preflight custom
      const res = await fetch(ENDPOINT, { method: "POST", body: fd });
      const txt = await res.text().catch(()=> "");
      let json = null; try { json = JSON.parse(txt); } catch {}
      if (!res.ok) throw new Error(`HTTP ${res.status} ${res.statusText} ‚Üí ${txt}`);
      return json || { ok:false, error:"invalid_json", raw:txt };
    }

    async function uploadSingle(file){
      if (!file) return;
      try{
        const j = await uploadMultipart(file);
        if (j && j.ok) {
          alert("Subida correcta ‚úÖ");
        } else {
          alert(j?.error || "Error desconocido");
        }
      }catch(err){
        alert(err?.message || String(err));
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      const $ = (s) => document.querySelector(s);
      const btnFoto = $('#btnFoto'), btnVideo = $('#btnVideo'), btnGaleria = $('#btnGaleria');
      const pickFoto = $('#pickFoto'), pickVideo = $('#pickVideo'), pickGaleria = $('#pickGaleria');

      const handlePicked = async (input) => {
        if (!input.files || !input.files.length) return;
        const file = input.files[0];
        await uploadSingle(file);
        input.value = '';
      };

      btnFoto.addEventListener('click', () => pickFoto.click());
      btnVideo.addEventListener('click', () => pickVideo.click());
      btnGaleria.addEventListener('click', () => pickGaleria.click());

      pickFoto.addEventListener('change', () => handlePicked(pickFoto));
      pickVideo.addEventListener('change', () => handlePicked(pickVideo));
      pickGaleria.addEventListener('change', () => handlePicked(pickGaleria));
    });
  </script>
</body>
</html>