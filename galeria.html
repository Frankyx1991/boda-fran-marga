<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Fran & Marga â€” 11/10/2025</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="stage">
    <header class="overlay">
      <h1>Fran &amp; Marga</h1>
      <p class="date">11/10/2025</p>
    </header>

    <div class="controls">
      <button id="btnPhoto" class="btn-primary">ğŸ“· Tomar foto</button>
      <button id="btnVideo" class="btn-primary">ğŸ¥ Grabar vÃ­deo</button>
      <button id="btnGallery" class="btn-primary">ğŸ–¼ï¸ Subir desde galerÃ­a</button>
    </div>

    <input id="inPhoto" type="file" accept="image/*" capture="environment" hidden>
    <input id="inVideo" type="file" accept="video/*" capture="camcorder" hidden>
    <input id="inGallery" type="file" accept="image/*,video/*" hidden>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>
  </main>

  <script>
    // Tu Apps Script (web app) â€“ OK
    const APPS_SCRIPT_URL =
      "https://script.google.com/macros/s/AKfycbxXP8C7m2wZs_PouM0eS482y63bPymYPTws-u1LdH6yF5vGhSR7E4uBAFkguWA93BPn/exec";

    const $ = (s) => document.querySelector(s);
    const toast = (msg) => {
      const el = $('#toast');
      el.textContent = msg;
      el.classList.add('show');
      clearTimeout(window.__t);
      window.__t = setTimeout(()=>el.classList.remove('show'), 3200);
    };

    async function uploadFile(file, folder){
      if(!file) return;
      const maxMB = 25;
      if(file.size > maxMB*1024*1024){ toast(`El archivo supera ${maxMB} MB.`); return; }

      const form = new FormData();
      form.append('file', file);
      form.append('folder', folder);

      toast('Subiendoâ€¦ Por favor espera');
      try{
        await fetch(APPS_SCRIPT_URL, { method:'POST', body: form, mode:'no-cors' });
        toast('Â¡Gracias por compartir este momento con nosotros ğŸ’–!');
      }catch(err){
        console.error(err);
        toast('Error al subir. Vuelve a intentarlo.');
      }
    }

    const inPhoto = $('#inPhoto'), inVideo = $('#inVideo'), inGallery = $('#inGallery');
    $('#btnPhoto').onclick   = ()=> inPhoto.click();
    $('#btnVideo').onclick   = ()=> inVideo.click();
    $('#btnGallery').onclick = ()=> inGallery.click();

    inPhoto.onchange   = (e)=> uploadFile(e.target.files[0], 'fotos');
    inVideo.onchange   = (e)=> uploadFile(e.target.files[0], 'videos');
    inGallery.onchange = (e)=> uploadFile(e.target.files[0], 'galeria');
  </script>
</body>
</html>